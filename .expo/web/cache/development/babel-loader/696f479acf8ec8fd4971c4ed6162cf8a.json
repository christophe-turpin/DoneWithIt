{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nvar API_URL = 'http://localhost:3001/api/auth/';\n\nvar storeData = function storeData() {\n  return _regeneratorRuntime.async(function storeData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('name', 'John'));\n\n        case 3:\n          _context.next = 7;\n          break;\n\n        case 5:\n          _context.prev = 5;\n          _context.t0 = _context[\"catch\"](0);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 5]], Promise);\n};\n\nvar getData = function getData() {\n  var value;\n  return _regeneratorRuntime.async(function getData$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('name'));\n\n        case 3:\n          value = _context2.sent;\n\n          if (value !== null) {\n            console.log(value);\n          }\n\n          _context2.next = 9;\n          break;\n\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n};\n\nvar register = function register(pseudo, email, password) {\n  return axios.post(API_URL + \"signup\", {\n    pseudo: pseudo,\n    email: email,\n    password: password\n  });\n};\n\nvar login = function login(email, password) {\n  return axios.post(API_URL + \"signin\", {\n    email: email,\n    password: password\n  }).then(function (response) {\n    if (response.data.accessToken) {\n      storeData('user', JSON.stringify(response.data));\n    }\n\n    return response.data;\n  });\n};\n\nvar logout = function logout(props) {\n  CacheStore.remove('user');\n};\n\nvar getCurrentUser = function getCurrentUser() {\n  return getData('user');\n};\n\nexport default {\n  register: register,\n  login: login,\n  logout: logout,\n  getCurrentUser: getCurrentUser\n};","map":{"version":3,"sources":["/home/christophe/workspace/ReactNative/DoneWithIt/services/auth.service.js"],"names":["axios","AsyncStorage","API_URL","storeData","setItem","getData","getItem","value","console","log","register","pseudo","email","password","post","login","then","response","data","accessToken","JSON","stringify","logout","props","CacheStore","remove","getCurrentUser"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;SACSC,Y;AAET,IAAMC,OAAO,GAAG,iCAAhB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEJF,YAAY,CAACG,OAAb,CAAqB,MAArB,EAA6B,MAA7B,CAFI;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAlB;;AAQA,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAEYJ,YAAY,CAACK,OAAb,CAAqB,MAArB,CAFZ;;AAAA;AAEFC,UAAAA,KAFE;;AAGR,cAAIA,KAAK,KAAK,IAAd,EAAoB;AAEhBC,YAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;;AANO;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;;AAYA,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,EAASC,KAAT,EAAgBC,QAAhB,EAA6B;AAC1C,SAAOb,KAAK,CAACc,IAAN,CAAcZ,OAAd,aAA+B;AAClCS,IAAAA,MAAM,EAANA,MADkC;AAElCC,IAAAA,KAAK,EAALA,KAFkC;AAGlCC,IAAAA,QAAQ,EAARA;AAHkC,GAA/B,CAAP;AAKH,CAND;;AAQA,IAAME,KAAK,GAAG,SAARA,KAAQ,CAACH,KAAD,EAAQC,QAAR,EAAqB;AAC/B,SAAOb,KAAK,CAACc,IAAN,CAAcZ,OAAd,aAA+B;AAClCU,IAAAA,KAAK,EAALA,KADkC;AAElCC,IAAAA,QAAQ,EAARA;AAFkC,GAA/B,EAING,IAJM,CAID,UAACC,QAAD,EAAc;AAChB,QAAIA,QAAQ,CAACC,IAAT,CAAcC,WAAlB,EAA+B;AAC3BhB,MAAAA,SAAS,CAAC,MAAD,EAASiB,IAAI,CAACC,SAAL,CAAeJ,QAAQ,CAACC,IAAxB,CAAT,CAAT;AACH;;AACD,WAAOD,QAAQ,CAACC,IAAhB;AACH,GATM,CAAP;AAUH,CAXD;;AAaA,IAAMI,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAW;AACtBC,EAAAA,UAAU,CAACC,MAAX,CAAkB,MAAlB;AACH,CAFD;;AAIA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AACzB,SAAOrB,OAAO,CAAC,MAAD,CAAd;AACH,CAFD;;AAIA,eAAe;AACdK,EAAAA,QAAQ,EAARA,QADc;AAEdK,EAAAA,KAAK,EAALA,KAFc;AAGdO,EAAAA,MAAM,EAANA,MAHc;AAIdI,EAAAA,cAAc,EAAdA;AAJc,CAAf","sourcesContent":["import axios from 'axios';\nimport { AsyncStorage } from 'react-native';\n\nconst API_URL = 'http://localhost:3001/api/auth/'\n\nconst storeData = async () => {\n    try {\n        await AsyncStorage.setItem('name', 'John');\n    } catch (error) {\n        // Error saving data\n    }\n}\n\nconst getData = async () => {\n    try {\n        const value = await AsyncStorage.getItem('name');\n        if (value !== null) {\n            // Our data is fetched successfully\n            console.log(value);\n        }\n    } catch (error) {\n        // Error retrieving data\n    }\n}\n\nconst register = (pseudo, email, password) => {\n    return axios.post(`${API_URL}signup`, {\n        pseudo,\n        email,\n        password\n    })\n};\n\nconst login = (email, password) => {\n    return axios.post(`${API_URL}signin`, {\n        email,\n        password\n    })\n    .then((response) => {\n        if (response.data.accessToken) {\n            storeData('user', JSON.stringify(response.data))\n        }\n        return response.data\n    })\n};\n\nconst logout = (props) => {\n    CacheStore.remove('user')\n};\n\nconst getCurrentUser = () => {\n    return getData('user')\n};\n\nexport default {\n\tregister,\n\tlogin,\n\tlogout,\n\tgetCurrentUser\n};"]},"metadata":{},"sourceType":"module"}